{"version":3,"sources":["../src/generateKeys.js"],"names":["objectAssign","require","module","exports","blocks","map","block","_key","getStaticKey","item","checksum","JSON","stringify","toString","replace","str","hash","strlen","length","i","charCodeAt"],"mappings":";;AAAA,IAAMA,eAAeC,QAAQ,eAAR,CAArB;;AAEAC,OAAOC,OAAP,GAAiB,kBAAU;AACzB,SAAOC,OAAOC,GAAP,CAAW,iBAAS;AACzB,QAAIC,MAAMC,IAAV,EAAgB;AACd,aAAOD,KAAP;AACD;;AAED,WAAON,aAAa,EAACO,MAAMC,aAAaF,KAAb,CAAP,EAAb,EAA0CA,KAA1C,CAAP;AACD,GANM,CAAP;AAOD,CARD;;AAUA,SAASE,YAAT,CAAsBC,IAAtB,EAA4B;AAC1B,SAAOC,SAASC,KAAKC,SAAL,CAAeH,IAAf,CAAT,EACJI,QADI,CACK,EADL,EAEJC,OAFI,CAEI,eAFJ,EAEqB,EAFrB,CAAP;AAGD;;AAED;AACA,SAASJ,QAAT,CAAkBK,GAAlB,EAAuB;AACrB,MAAIC,OAAO,CAAX;AACA,MAAMC,SAASF,IAAIG,MAAnB;AACA,MAAID,WAAW,CAAf,EAAkB;AAChB,WAAOD,IAAP;AACD;;AAED,OAAK,IAAIG,IAAI,CAAb,EAAgBA,IAAIF,MAApB,EAA4BE,GAA5B,EAAiC;AAC/BH,WAAO,CAACA,QAAQ,CAAT,IAAcA,IAAd,GAAqBD,IAAIK,UAAJ,CAAeD,CAAf,CAA5B;AACAH,YAAQA,IAAR,CAF+B,CAElB;AACd;;AAED,SAAOA,IAAP;AACD;AACD","file":"generateKeys.js","sourcesContent":["const objectAssign = require('object-assign')\n\nmodule.exports = blocks => {\n  return blocks.map(block => {\n    if (block._key) {\n      return block\n    }\n\n    return objectAssign({_key: getStaticKey(block)}, block)\n  })\n}\n\nfunction getStaticKey(item) {\n  return checksum(JSON.stringify(item))\n    .toString(36)\n    .replace(/[^A-Za-z0-9]/g, '')\n}\n\n/* eslint-disable no-bitwise */\nfunction checksum(str) {\n  let hash = 0\n  const strlen = str.length\n  if (strlen === 0) {\n    return hash\n  }\n\n  for (let i = 0; i < strlen; i++) {\n    hash = (hash << 5) - hash + str.charCodeAt(i)\n    hash &= hash // Convert to 32bit integer\n  }\n\n  return hash\n}\n/* eslint-enable no-bitwise */\n"]}